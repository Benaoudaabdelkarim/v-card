(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function n(e,n,a){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var c=a.call(e,n||"default");if("object"!=t(c))return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function a(t){var e=(JSON.parse(localStorage.getItem("cart"))||{})["store_".concat(t)]||{},n=Object.values(e).filter((function(t){return t&&t.id})).length,a=n>0?n:0;0==a?$(".order-btn").prop("disabled",!0):$(".order-btn").prop("disabled",!1),$(".product-count-badge").text(a)}document.addEventListener("DOMContentLoaded",(function(){var t=$("#whatsappStoreId").val();!function(){var t=document.querySelector("#phoneNumber"),e=document.querySelector("#prefix_code");if(t){var n=window.intlTelInput(t,{initialCountry:"us",preferredCountries:["us","gb","in"],separateDialCode:!0});t.addEventListener("countrychange",(function(){var t=n.getSelectedCountryData();e.value=t.dialCode}))}}(),Lang.setLocale(lang),a(t)})),listenClick(".addToCartBtn",(function(c){c.preventDefault(),displaySuccessMessage(Lang.get("js.product_added_to_cart"));var r=$(this),o=r.html();r.html(" âœ“ ").addClass("animate-btn"),r.prop("disabled",!0),setTimeout((function(){r.removeClass("animate-btn"),r.prop("disabled",!1),r.html(o)}),2e3);var i=$("#whatsappStoreId").val(),l=($(this).attr("data-id"),$(this).closest(".item-card, .product-card, .details"));!function(c,r){var o=JSON.parse(localStorage.getItem("cart"))||{};o["store_".concat(c)]||(o["store_".concat(c)]={grand_total:0});var i=o["store_".concat(c)];i[r.id]?(i[r.id].qty+=1,i[r.id].total_price=i[r.id].price*i[r.id].qty):i[r.id]=function(t){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{};a%2?e(Object(c),!0).forEach((function(e){n(t,e,c[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(c)):e(Object(c)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(c,e))}))}return t}({},r);i.grand_total=Object.values(i).filter((function(e){return"object"===t(e)})).reduce((function(t,e){return t+Number(e.total_price)}),0),localStorage.setItem("cart",JSON.stringify(o)),a(c)}(i,{id:$(this).data("id"),name:l.find(".product-name").text().trim(),image_url:l.find(".product-image").attr("src")||l.find(".product-image").val(),currency_icon:l.find(".currency_icon").text().trim(),category_name:l.find(".product-category").text().trim()||l.find(".product-category").val(),qty:1,price:l.find(".selling_price").text().trim(),total_price:l.find(".selling_price").text().trim()})})),listenClick("#addToCartViewBtn",(function(){var t,e=$("#whatsappStoreId").val(),n=(JSON.parse(localStorage.getItem("cart"))||{})["store_".concat(e)]||{},a=null!==(t=null==n?void 0:n.grand_total)&&void 0!==t?t:0,c=Object.values(n).filter((function(t){return t&&null!=t.id})),r=$("#cartItems");r.html(""),$.each(c,(function(t,e){r.append('\n            <tr>\n                <td class="fw-6 fs-14">\n                    <div class="d-flex gap-lg-4 gap-3 align-items-center">\n                        <div class="product-img">\n                            <img  src="'.concat(e.image_url,'" alt="product" style="width: 50px ; height: 50px;" class=" object-fit-cover rounded"  loading="lazy" />\n                        </div>\n                        <div>\n                            <h5 class="fs-18 fw-6 mb-0">').concat(e.name,'</h5>\n                            <p class="mb-0 fs-14">').concat(e.category_name,'</p>\n                        </div>\n                    </div>\n                </td>\n                <td class="fw-6 fs-14">').concat(e.currency_icon," ").concat(e.price,'</td>\n                <td class="text-center">\n                    <div class="btn-group gap-1 justify-content-center">\n                        <button type="button" class="btn minus-btn" data-id="').concat(e.id,'">-</button>\n                        <button type="button" class="btn count-btn bg-white" id="qty_').concat(e.id,'">').concat(e.qty,'</button>\n                        <button type="button" class="btn plus-btn" data-id="').concat(e.id,'">+</button>\n                    </div>\n                </td>\n                <td class="fw-6 fs-14 text-end" id="total_').concat(e.id,'">').concat(e.currency_icon," ").concat(e.total_price,'</td>\n                 <td class="text-center">\n                <button type="button" class="btn delete-btn" data-id="').concat(e.id,'" style="padding:4px 8px;">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256">\n                              <g fill="#f00808" fill-rule="nonzero">\n                    <g transform="scale(8.53333,8.53333)">\n                 <path d="M14.98438,2.48633c-0.55152,0.00862 -0.99193,0.46214 -0.98437,1.01367v0.5h-5.5c-0.26757,-0.00363 -0.52543,0.10012 -0.71593,0.28805c-0.1905,0.18793 -0.29774,0.44436 -0.29774,0.71195h-1.48633c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h18c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587h-1.48633c0,-0.26759 -0.10724,-0.52403 -0.29774,-0.71195c-0.1905,-0.18793 -0.44836,-0.29168 -0.71593,-0.28805h-5.5v-0.5c0.0037,-0.2703 -0.10218,-0.53059 -0.29351,-0.72155c-0.19133,-0.19097 -0.45182,-0.29634 -0.72212,-0.29212zM6,9l1.79297,15.23438c0.118,1.007 0.97037,1.76563 1.98438,1.76563h10.44531c1.014,0 1.86538,-0.75862 1.98438,-1.76562l1.79297,-15.23437z"></path>\n                     </g>\n                 </g>\n                     </svg>\n                </button>\n\n                </td>\n            </tr>\n        '))})),$("#grandTotal").text("Grand Total:  ".concat(a)),$("#cartModal").modal("show")})),listenClick(".delete-btn",(function(){var e=$("#whatsappStoreId").val(),n=$(this).attr("data-id");displaySuccessMessage(Lang.get("js.product_deleted_from_cart"));var c,r,o=JSON.parse(localStorage.getItem("cart"))||{};o["store_".concat(e)]&&o["store_".concat(e)][n]&&(delete o["store_".concat(e)][n],o["store_".concat(e)].grand_total=Object.values(o["store_".concat(e)]).filter((function(e){return"object"===t(e)})).reduce((function(t,e){return t+Number(e.total_price)}),0),1===Object.keys(o["store_".concat(e)]).length&&delete o["store_".concat(e)],localStorage.setItem("cart",JSON.stringify(o)),$(this).closest("tr").remove(),a(e),$("#grandTotal").text("Grand Total:  ".concat(null!==(c=null===(r=o["store_".concat(e)])||void 0===r?void 0:r.grand_total)&&void 0!==c?c:0)))})),listenClick(".plus-btn",(function(){var e=$("#whatsappStoreId").val(),n=$(this).attr("data-id"),c=JSON.parse(localStorage.getItem("cart"))||{},r=c["store_".concat(e)];r&&r[n]&&(r[n].qty+=1,r[n].total_price=r[n].qty*r[n].price,r.grand_total=Object.values(r).filter((function(e){return"object"===t(e)})).reduce((function(t,e){return t+Number(e.total_price)}),0),localStorage.setItem("cart",JSON.stringify(c)),a(e),$("#qty_".concat(n)).text(r[n].qty),$("#total_".concat(n)).text("".concat(r[n].currency_icon," ").concat(r[n].total_price)),$("#grandTotal").text("Grand Total:  ".concat(r.grand_total)))})),listenClick(".minus-btn",(function(){var e=$("#whatsappStoreId").val(),n=$(this).attr("data-id"),c=JSON.parse(localStorage.getItem("cart"))||{},r=c["store_".concat(e)];if(r&&r[n]){if(1===r[n].qty)return;r[n].qty-=1,r[n].total_price=r[n].qty*r[n].price,r.grand_total=Object.values(r).filter((function(e){return"object"===t(e)})).reduce((function(t,e){return t+Number(e.total_price)}),0),localStorage.setItem("cart",JSON.stringify(c)),a(e),$("#qty_".concat(n)).text(r[n].qty),$("#total_".concat(n)).text("".concat(r[n].currency_icon," ").concat(r[n].total_price)),$("#grandTotal").text("Grand Total:  ".concat(r.grand_total))}})),listenSubmit("#orderForm",(function(e){e.preventDefault(),displaySuccessMessage(Lang.get("js.order_placed")),$(this).find(".btn").prop("disabled",!0);var n=$("#whatsappStoreId").val(),c=(JSON.parse(localStorage.getItem("cart"))||{})["store_".concat(n)],r=(null==c?void 0:c.grand_total)||0,o=[];c&&(o=Object.values(c).filter((function(e){return"object"===t(e)})).filter((function(t){return t&&null!=t.id})).map((function(t){return{id:t.id,price:t.price,qty:t.qty,total_price:t.total_price}})));var i=$(this).serialize()+"&wp_store_id="+n+"&grand_total="+r+"&products="+encodeURIComponent(JSON.stringify(o)),l=$("#productBuyUrl").val();setTimeout((function(){$.ajax({url:l,type:"POST",data:i,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){t.success&&(!function(t){var e=$("#baseUrl").val(),n=$("#storeAlias").val(),a=$("#wpRegionCode").val(),c=$("#whatsappNo").val(),r="Customer Details:\n";r+="------------------------------\n",r+="Name: ".concat(t.name,"\n"),r+="Phone: +".concat(t.region_code," ").concat(t.phone,"\n"),r+="Address: ".concat(t.address,"\n\n"),r+="Order ID: ".concat(t.order_id,"\n"),r+="------------------------------\n",r+="Products Details:\n",r+="------------------------------\n",t.products.forEach((function(t,a){var c="".concat(e,"/whatsapp-store/").concat(n,"/").concat(t.product_id,"/product-details");r+="".concat(a+1,".\n"),r+="Name: ".concat(t.product?t.product.name:"Unknown","\n"),r+="Product URL: ".concat(c,"\n"),r+="Price: ".concat(t.product.currency.currency_icon," ").concat(t.price,"\n"),r+="Qty: ".concat(t.qty,"\n"),r+="Total Price: ".concat(t.product.currency.currency_icon," ").concat(t.total_price,"\n"),r+="------------------------------\n"})),r+="\nGrand Total: ".concat(t.grand_total,"\n");var o=encodeURIComponent(r),i="+".concat(a).concat(c),l="https://wa.me/".concat(i,"?text=").concat(o);window.open(l,"_blank")}(t.data),localStorage.removeItem("cart"),a(n),window.location.reload())},error:function(t){$(this).find(".btn").prop("disabled",!1),alert(t.responseJSON.message)}})}),3e3)})),listenClick("#languageName",(function(){var t=$(this).attr("data-name");$.ajax({url:languageChange+"/"+t+"/"+vcardAlias,type:"GET",success:function(t){location.reload()},error:function(t){alert(t.responseJSON.message)}})})),window.displaySuccessMessage=function(t){toastr.options={positionClass:"toast-top-right",progressBar:!0,closeButton:!0,timeOut:5e3,extendedTimeOut:2e3},toastr.success(t,Lang.get("js.successful"))},listenClick(".drop-item-select",(function(){$(".drop-item-select").removeClass("active"),$(this).addClass("active")}))})();